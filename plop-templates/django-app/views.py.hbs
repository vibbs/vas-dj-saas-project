from rest_framework import status, viewsets
from rest_framework.permissions import IsAuthenticated

from .models import {{pascalCase name}}
from .serializers import {{pascalCase name}}Serializer


class {{pascalCase name}}ViewSet(viewsets.ModelViewSet):
    """
    CRUD ViewSet for {{pascalCase name}}.

    Scoped to the user's organization via the tenant middleware.
    """

    serializer_class = {{pascalCase name}}Serializer
    permission_classes = [IsAuthenticated]

    def get_queryset(self):
        return {{pascalCase name}}.objects.filter(
            organization=self.request.user.get_primary_organization()
        )

    def perform_create(self, serializer):
        serializer.save(
            organization=self.request.user.get_primary_organization()
        )
